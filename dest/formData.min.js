/**
 * formData - Form validation based on data attributes
 * @date - Sun May 29 2016 22:35:34 GMT+0200 (CEST)
 * @version - 1.0.3
 */
!function(t,i,r){"use strict";function e(i,r){this.$form=t(i),this.$form.attr("novalidate",!0),this.options=t.extend(!0,{},s,r),this.$fields=this.$form.find("[data-"+this.options.validDataAttr+"], [required]"),this.isFormValid=!1,this.formLog={},this.formFields={},this.version=n,this.getFieldsRules(),this.addFormEvents(),this.addFieldEvents()}var s,o,a,n,l;l={},a="FormData",n="1.0.3",o={validFormClass:"formdata"},s={keyup:!1,blur:!0,validDataAttr:"valid",classSuccess:"fd-success",classError:"fd-error",classFormError:"fd-form-invalid",placeForError:"afterInput",tpl:{error:'<span class="form-error">{message}</span>'},preventSubmit:!1,onError:null,onSuccess:null},e.prototype.getFieldsRules=function(){var i,r,e,s,o,a,n=null;i=this,this.fieldsRules=[],r=0,this.$fields.each(function(){e=t(this),o=e.data(i.options.validDataAttr)||null,e.data("field-id",r),e.attr("aria-invalid","false"),s=e.attr("name"),/\|/.test(o)?(o=o.split("|"),a=o[0],n=o[1],/\-/.test(n)&&(n=n.split("-"))):a=o,i.fieldsRules.push({name:a,opt:n}),i.formFields[s]=e,r++})},e.prototype.addFieldEvents=function(){var t=this;this.$fields.on({keyup:function(i){9!==i.keyCode&&t.options.keyup&&t.validateField(this)},blur:function(){return t.options.blur?t.validateField(this):!1}})},e.prototype.addFormEvents=function(){var t=this;this.$form.on("submit",function(i){t.options.preventSubmit&&i.preventDefault(),t.validate()||i.preventDefault()})},e.prototype.validate=function(){var t=this;return this.$fields.each(function(){t.validateField(this)}),this.showHideFormErrors(),this.isFormValid=!this.parseFormLog(),this.isFormValid?(this.$form.removeClass(this.options.classFormError),"function"==typeof t.options.onSuccess&&this.options.onSuccess(this.$form)):(this.$form.addClass(this.options.classFormError),"function"==typeof t.options.onError&&this.options.onError(this.formLog)),this.isFormValid},e.prototype.parseFormLog=function(){var t,i;i=0;for(t in this.formLog)this.formLog[t]&&(i+=1);return i},e.prototype.validateField=function(i){this.$field=t(i),this.fieldId=this.$field.data("field-id"),this.fieldName=this.$field.attr("name"),this.value=t.trim(this.$field.val()),this.opt=this.fieldsRules[this.fieldId].opt,this.fieldRuleName=this.fieldsRules[this.fieldId].name?this.fieldsRules[this.fieldId].name:"required",this.validationRule=e.getRule(this.fieldRuleName),this.isFieldValid(this.validationRule.fn.call(this))},e.prototype.isFieldValid=function(t){return t?this.removeErrorFromLog():this.addErrorToLog()},e.prototype.addErrorToLog=function(){if(!this.$field.prop("disabled")){if(this.message=this.$field.data("message")?this.$field.data("message"):this.validationRule.message,"string"==typeof this.opt&&(this.message=this.message.replace(/{\w+}/i,this.opt)),this.opt&&"object"==typeof this.opt)for(var t=0;t<this.opt.length;t++)this.message=this.message.replace(/{\w+}/i,this.opt[t]);this.formLog[this.fieldName]=this.message}},e.prototype.removeErrorFromLog=function(){delete this.formLog[this.fieldName]},e.prototype.showHideFormErrors=function(){var t,i,r;r=0;for(t in this.formFields)this.formFields.hasOwnProperty(t)&&(this.$field=this.formFields[t],this.formLog[t]?(this.message=this.formLog[t],this.showFieldError()):this.hideFieldError(),r++);"afterInput"!=this.options.placeForError&&(i=this.$form.find(this.options.placeForError),i.length&&i.html(r?this._renderErrorTpl(this._getFirstLogError()):""))},e.prototype.showFieldError=function(){return this.$field.removeClass(this.options.classSuccess),this.$field.addClass(this.options.classError),this.$field.attr("aria-invalid","true"),"afterInput"==this.options.placeForError&&(this.$field.next().data("inserted")&&this.$field.next().remove(),this.$field.after(this._renderErrorTpl(this.message))),this},e.prototype.hideFieldError=function(){this.$field.removeClass(this.options.classError),this.$field.addClass(this.options.classSuccess),this.$field.attr("aria-invalid","false"),"afterInput"==this.options.placeForError&&this.$field.next().remove()},e.prototype._getFirstLogError=function(){var t;for(t in this.formLog)return this.formLog[t];return null},e.prototype._renderErrorTpl=function(i){return t(this.options.tpl.error.replace(/{message}/i,i)).data("inserted",!0)},e.prototype.parseErrors=function(t){return"string"==typeof t?JSON.parse(t):t},e.prototype.setErrors=function(i){this.formLog=t.extend(this.formLog,this.parseErrors(i)),this.showHideFormErrors(),this.parseFormLog()&&this.$form.addClass(this.options.classFormError)},e.setup=function(i){s=t.extend(!0,{},s,i)},e.addRule=function(t,i,r){if(l[t])throw new Error("Validation rule:"+t+" already added.");if("function"!=typeof i)throw new Error("Rule function not defined.");l[t]={fn:i,message:r||"Error"}},e.getRule=function(t){if(!l[t])throw new Error("Validation rule:"+t+" doesn't exist.");return l[t]},window.FormData=e,t.fn[a]=function(i){return this.each(function(){var r,s;r=t(this),s=r.data(a),s||r.data(a,new e(this,i))})},t(function(){t("."+o.validFormClass).FormData()})}(jQuery,window,document),function(t){FormData.addRule("required",function(){return this.value.length},"This field is required."),FormData.addRule("email",function(){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(this.value)},"Please enter a valid email address. For example user@site.com"),FormData.addRule("number",function(){var t=/^\d+$/;return t.test(this.value)},"Please enter numbers only."),FormData.addRule("float",function(){var t=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;return t.test(this.value)},"Please enter numbers with float point."),FormData.addRule("min",function(){return this.value.length>=Math.floor(this.opt)},"You should fill minimum {min} characters."),FormData.addRule("max",function(){return this.value.length<=Math.floor(this.opt)&&this.value.length},"You should fill maximum {max} characters"),FormData.addRule("range",function(){return this.value.length>=Math.floor(this.opt[0])&&this.value.length<=Math.floor(this.opt[1])},"You should fill from {min} to {max} characters.")}(jQuery);